function t937_init(e,t){var l,i,n,r=document.getElementById("rec"+e);r&&(l=r.querySelector(".t937__playlist-wrap"),i=r.querySelector(".t937__col_video"),n=t937_parseData(e),r=t937_getUrlParametrs(e).activeVideoId,t937_setSizes(e,t),t937_renderVideoCount(n,e,t),t937_renderPlaylist(n,r,e,t),t937_renderVideoFrame(n,r,e,t),i&&(i.style.height=""),l&&(l.style.visibility="visible"),t937_addEvents(e,t))}function t937_getUrlParametrs(e){var t,l,i=window.location.hash;return l=i&&-1===i.indexOf("#tlection=")?(t=e,1):+e==+(t=(l=i.replace("#tlection=","").split("_"))[0])?l[1]:1,{activeRecId:t,activeVideoId:l}}function t937_parseData(e){e=document.getElementById("rec"+e);if(e){var e=e?e.querySelector(".t937__data"):null,e=e?e.innerHTML:"",t=[];if(e)for(var l=(e=e.replace(/&amp;/gi,"&")).split("\n"),i=0;i<l.length;i++){var n=t937_getVideoData(l[i].split(";"));(n.url||n.section)&&t.push(n)}return t}}function t937_getVideoData(e){var t=e[0].trim();if(0===t.indexOf("[")&&t.indexOf("]")===t.length-1)return{section:t.slice(1,-1)};var l=e[0]&&e[0].length?e[0].trim():null,i=e[1]?e[1].trim():null,n=e[2]?e[2].trim():null,t=e[3]?e[3].trim():null,e=null;return/youtube.com|youtu.be/gi.test(l)&&(e="youtube"),/vimeo.com/gi.test(l)&&(e="vimeo"),/.mp4/gi.test(l)&&(e="mp4"),{url:l,title:i,time:n,description:t,type:e}}function t937_renderPlaylist(e,t,l,i){var n=document.getElementById("rec"+l).querySelector(".t937__playlist");n&&(n.dataVideoContent=e),n&&(n.dataPlaylistStyles=i);var r=1;t937_setSizes(l,i),n&&(n.innerHTML="");var o=i.mainColor.length?"color: "+i.mainColor+";":"",a=i.secondaryColor.length?"color: "+i.secondaryColor+";":"",d=i.borderColor.length?"border-bottom: 1px solid "+i.borderColor+";":"";t937_renderFade(l,i.bgColor);for(var s=0;s<e.length;s++){var c,u,_,m=e[s],y=s+1,g=Number(y)===Number(t);Object.prototype.hasOwnProperty.call(m,"section")?((u=document.createElement("div")).classList.add("t937__playlist-item"),u.classList.add("t937__playlist-item_section"),u.setAttribute("style",d),(c=document.createElement("div")).classList.add("t937__playlist-section"),c.classList.add("t-name"),c.classList.add("t-name_xs"),c.setAttribute("style",o),c.textContent=m.section,u.insertAdjacentElement("beforeend",c)):(_=m.title&&m.title.length?m.title:t937_translate("videoTitle"),c=m.time||"",m=g&&i.linkBgColor.length?"background-color: "+i.linkBgColor+";":"",(u=document.createElement("div")).classList.add("t937__playlist-item"),u.setAttribute("data-video-id",y.toString()),u.setAttribute("style",d),u.setAttribute("onclick","window.t937_onVideoClick("+y+", "+l+")"),y=document.createElement("div"),g?(y.classList.add("t937__playlist-link"),y.classList.add("t-text"),y.classList.add("t-text_xs"),y.classList.add("t937__playlist-link_active")):(y.classList.add("t937__playlist-link"),y.classList.add("t-text"),y.classList.add("t-text_xs")),y.setAttribute("style",m),(g=document.createElement("div")).classList.add("t937__playlist-number"),g.setAttribute("style",a),g.textContent=r.toString(),(m=document.createElement("div")).classList.add("t937__playlist-title"),m.setAttribute("style",o),m.innerHTML=_,(_=document.createElement("div")).classList.add("t937__playlist-time"),_.setAttribute("style",a),_.textContent=c,y.insertAdjacentElement("beforeend",g),y.insertAdjacentElement("beforeend",m),y.insertAdjacentElement("beforeend",_),u.insertAdjacentElement("beforeend",y),u.addEventListener("mousemove",function(e){e.target.closest(".t937__playlist-item").style.backgroundColor=i.linkBgColor.length?i.linkBgColor:"#F0F0F0"}),u.addEventListener("mouseout",function(e){e.target.closest(".t937__playlist-item").style.backgroundColor=""}),r++),n&&n.insertAdjacentElement("beforeend",u)}}function t937_renderVideoFrame(e,t,l){var i,n,r=document.getElementById("rec"+l),o=r?r.querySelector(".t937__video"):null,a=o?.5625*o.offsetWidth:0;o&&o.classList.remove("t937__video_empty");for(var d,s=t-1;s<e.length;s++)if(e[s].url){t937_renderDescription(n=e[s],l);break}e.length&&n&&n.type?"youtube"===n.type?(null!==(d=n.url.match(/youtu(?:.*\/v\/|.*v\=|\.be\/)([A-Za-z0-9_\-]{11})/))&&(d=d[1]),(i=document.createElement("iframe")).classList.add("t937__video-frame"),i.classList.add("t937__video-frame_youtube"),i.width="100%",i.height=a.toString(),i.src="https://www.youtube.com/embed/"+d+"?rel=0&fmt=18&html5=1&enablejsapi=1",i.frameBorder="0",i.setAttribute("allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"),i.setAttribute("allowfullscreen","")):"vimeo"===n.type?(d=(r=/vimeo[^/]*\/(\d+)\/?(\w*)\/?/i.exec(n.url))?r[1]:null,t=r?"?h="+r[2]:null,r=(r=/#t=(\d*h)?(\d*m)?\d*s$/i.exec(n.url))?"/"+r[0]:"",d?((i=document.createElement("iframe")).classList.add("t937__video-frame"),i.classList.add("t937__video-frame_vimeo"),i.title="vimeo-player",i.width="100%",i.height=a.toString(),i.src="https://player.vimeo.com/video/"+d+t+r,i.frameBorder="0",i.setAttribute("allowfullscreen","")):(o&&o.classList.add("t937__video_empty"),(i=document.createElement("div")).classList.add("t937__system-message"),i.textContent=t937_translate("wrongFormat"))):"mp4"===n.type&&((i=document.createElement("video")).classList.add("t937__video-frame"),i.classList.add("t937__video-frame_html5"),i.controls=!0,i.title="html5-player",i.style.width="100%",i.height=a,(a=document.createElement("source")).src=n.url,a.setAttribute("type","video/mp4"),i.insertAdjacentElement("afterbegin",a)):(o&&o.classList.add("t937__video_empty"),(i=document.createElement("div")).classList.add("t937__system-message"),i.textContent=e.length?t937_translate("wrongFormat"):t937_translate("noData")),o&&(o.innerHTML="",o.insertAdjacentElement("beforeend",i))}function t937_renderDescription(e,t){var l=document.getElementById("rec"+t),i=l?l.querySelector(".t937__col_description"):null,t=i?i.querySelector(".t937__video-title"):null,l=i?i.querySelector(".t937__video-description"):null;i&&i.classList.add("t937__col_hidden"),t&&(t.innerHTML=""),l&&(l.innerHTML=""),e.description&&(i&&i.classList.remove("t937__col_hidden"),i=e.title&&e.title.length?e.title:t937_translate("videoTitle"),l.innerHTML=e.description,t.innerHTML=i)}function t937_renderVideoCount(e,t,l){var i,n=document.getElementById("rec"+t),t=n?n.querySelector(".t937__subheading-title"):null,n=n?n.querySelector(".t937__subheading-icon"):null,r=0,l=l.secondaryColor.length?l.secondaryColor.replace("#","%23"):"%23111111";for(i in n&&(n.style.backgroundImage="url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' width='16' height='16'%3E%3Ctitle%3Evideo playlist%3C/title%3E%3Cg class='nc-icon-wrapper' stroke-width='1' fill='"+l+"' stroke='"+l+"'%3E%3Crect x='0.5' y='2.5' width='15' height='12' rx='1' fill='none' stroke='"+l+"' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpolygon points='6.5 5.5 11.5 8.5 6.5 11.5 6.5 5.5' fill='none' stroke-linecap='round' stroke-linejoin='round' data-color='color-2'/%3E%3Cline x1='3.5' y1='0.5' x2='12.5' y2='0.5' fill='none' stroke='"+l+"' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/g%3E%3C/svg%3E\""),e)e[i].section||r++;l=t937_translate("videoPart");t&&(t.textContent=r+" "+l)}function t937_renderFade(e,t){t=t.length?t:"#ffffff";var l=document.getElementById("rec"+e),e=l?l.querySelector(".t937__playlist-fade"):null,l=t937_hex2rgb(t,0),t=t937_hex2rgb(t,1);e&&(e.style.backgroundImage="linear-gradient("+l+" 0%, "+t+" 90%)")}function t937_setSizes(e,t){var l=document.getElementById("rec"+e),i=l?l.querySelector(".t937__playlist-wrap"):null,n=l?l.querySelector(".t937__video-frame"):null,r=l?l.querySelector(".t937__col_playlist"):null,o=l?l.querySelector(".t937__description"):null,e=l?l.querySelector(".t937__video"):null,l=e?e.offsetWidth:0,e=.5625*l;n&&n.setAttribute("height",e.toString()),960<=window.innerWidth?(o&&(o.style.width=l+"px"),i&&(i.style.height=e+"px"),i&&(i.style.maxHeight=""),t.playlistWidth.length&&r&&(r.style.width=parseInt(t.playlistWidth,10)+"px")):(i&&(i.style.maxHeight=e+"px"),i&&(i.style.height=""),r&&(r.style.width=""),o&&(o.style.width=""))}function t937_translate(e){var t=[];t.videoTitle={RU:"Без названия",EN:"Untitled video",FR:"Vidéo sans titre",DE:"Video ohne Titel",ES:"Video sin título",PT:"Bez tytułu wideo",UK:"Відео без назви",JA:"無題の動画",ZH:"无标题的视频",PL:"Bez tytułu"},t.videoPart={RU:"видео",EN:"videos",FR:"vidéos",DE:"videos",ES:"videos",PT:"filmy",UK:"відео",JA:"ビデオ",ZH:"影片",PL:"video"},t.noData={RU:"Пожалуйста, добавьте хотя бы одно видео в плейлист",EN:"Please add at least one video to the playlist",UK:"Будь ласка, додайте хоча б одне відео в плейлист",PL:"Proszę dodać jeden filmik do listy"},t.wrongFormat={RU:"Пожалуйста, проверьте корректность заполненных данных",EN:"Please check that the data is filled in correctly",UK:"Будь ласка, перевірте коректність заповнених даних",PL:"Sprawdź poprawność danych"};var l=window.browserLang;return void 0!==t[e]?void 0!==t[e][l]&&""!==t[e][l]?t[e][l]:t[e].EN:"Text not found #"+e}function t937_hex2rgb(e,t){for(var l=(l=e.replace("#","")).match(new RegExp("(.{"+l.length/3+"})","g")),i=0;i<l.length;i++)l[i]=parseInt(1===l[i].length?l[i]+l[i]:l[i],16);return void 0!==t&&l.push(t),"rgba("+l.join(",")+")"}function t937_addEvents(l,i){window.addEventListener("resize",t_throttle(function(){t937_setSizes(l,i)})),"undefined"!=typeof jQuery?$(".t937").bind("displayChanged",function(){t937_setSizes(l,i)}):(e=document.querySelectorAll(".t937"),Array.prototype.forEach.call(e,function(e){e.addEventListener("displayChanged",function(){t937_setSizes(l,i)})}));var e=document.getElementById("rec"+l),n=e?e.querySelector(".t937__playlist-wrap"):null,r=e?e.querySelector(".t937__playlist-fade"):null;n&&n.addEventListener("scroll",function(){var e=n.offsetHeight,t=n.scrollTop;n.scrollHeight-30<=e+t?r&&(r.style.backgroundImage=""):t937_renderFade(l,i.bgColor)})}function t937_onVideoClick(e,t){var l=document.getElementById("rec"+t),i=l?l.querySelector(".t937__playlist"):null,l=i?i.dataVideoContent:null,i=i?i.dataPlaylistStyles:null;window.location.hash="tlection="+t+"_"+e,t937_renderPlaylist(l,e,t,i),t937_renderVideoFrame(l,e,t,i),t937_playVideo(t)}function t937_playVideo(e){var e=document.getElementById("rec"+e),t=e?e.querySelector(".t937__video-frame"):null;t&&t.classList.contains("t937__video-frame_youtube")&&t.addEventListener("load",function(){t.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*")})}"loading"!==document.readyState?document.body.style["-webkit-text-size-adjust"]="100%":document.addEventListener("DOMContentLoaded",function(){document.body.style["-webkit-text-size-adjust"]="100%"});
